<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026ç«¯åˆÂ·æ·±åœ³å‡ºå‘6æ—¥æ¸¸äº¤é€šè§„åˆ’å™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', 'Noto Sans SC', sans-serif; background: #f0f4f8; }
        .glass-panel { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }
        .slider-thumb::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 24px; height: 24px; background: #3b82f6; cursor: pointer; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.2); }
        .slider-thumb::-moz-range-thumb { width: 24px; height: 24px; background: #3b82f6; cursor: pointer; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.2); }
        .price-tag { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .route-card { transition: all 0.3s ease; }
        .route-card:hover { transform: translateY(-2px); box-shadow: 0 10px 40px -10px rgba(0,0,0,0.1); }
        .highlight-row { background: linear-gradient(90deg, rgba(59,130,246,0.1) 0%, transparent 100%); border-left: 4px solid #3b82f6; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
    </style>
</head>
<body class="text-gray-800">

<!-- Header -->
<div class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-8 px-4 shadow-lg">
    <div class="max-w-7xl mx-auto">
        <div class="flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-bold mb-2">ğŸ‹ 2026ç«¯åˆå‡æœŸäº¤é€šè§„åˆ’å™¨</h1>
                <p class="text-blue-100">æ·±åœ³å‡ºå‘ Â· 2å¤§1å° Â· 6å¤©5æ™š Â· å®æ—¶ç¥¨ä»·æŸ¥è¯¢</p>
            </div>
            <div class="text-right text-sm bg-white/20 px-4 py-2 rounded-lg backdrop-blur-sm">
                <div>æ•°æ®æ›´æ–°äº: <span id="updateDate" class="font-mono font-bold">2025-02-28</span></div>
                <div class="text-xs text-blue-200 mt-1">* ç¥¨ä»·å®æ—¶å˜åŠ¨ï¼Œè¯·ä»¥å®é™…æŸ¥è¯¢ä¸ºå‡†</div>
            </div>
        </div>
    </div>
</div>

<div class="max-w-7xl mx-auto px-4 py-8">

    <!-- Controls -->
    <div class="glass-panel rounded-2xl p-6 mb-8 shadow-lg">
        <div class="flex flex-col md:flex-row gap-8 items-center">
            
            <!-- Date Slider -->
            <div class="flex-1 w-full">
                <label class="block text-sm font-semibold text-gray-700 mb-3">é€‰æ‹©å‡ºå‘æ—¥æœŸï¼ˆæ»‘åŠ¨è°ƒæ•´ï¼‰</label>
                <div class="relative">
                    <input type="range" min="17" max="19" value="19" class="slider-thumb w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" id="dateSlider">
                    <div class="flex justify-between text-xs text-gray-500 mt-2 font-mono">
                        <span>6æœˆ17æ—¥<br><span class="text-xs text-gray-400">å‘¨äºŒ</span></span>
                        <span>6æœˆ18æ—¥<br><span class="text-xs text-gray-400">å‘¨ä¸‰</span></span>
                        <span>6æœˆ19æ—¥<br><span class="text-xs text-orange-600 font-bold">ç«¯åˆ</span></span>
                    </div>
                </div>
            </div>

            <!-- Trip Info -->
            <div class="flex gap-4 text-center">
                <div class="bg-blue-50 px-6 py-3 rounded-xl border border-blue-100">
                    <div class="text-xs text-gray-500 uppercase tracking-wide">å‡ºå‘æ—¥æœŸ</div>
                    <div class="text-2xl font-bold text-blue-600" id="departDate">6æœˆ19æ—¥</div>
                </div>
                <div class="bg-purple-50 px-6 py-3 rounded-xl border border-purple-100">
                    <div class="text-xs text-gray-500 uppercase tracking-wide">è¿”ç¨‹æ—¥æœŸ</div>
                    <div class="text-2xl font-bold text-purple-600" id="returnDate">6æœˆ24æ—¥</div>
                </div>
                <div class="bg-green-50 px-6 py-3 rounded-xl border border-green-100">
                    <div class="text-xs text-gray-500 uppercase tracking-wide">è¡Œç¨‹å¤©æ•°</div>
                    <div class="text-2xl font-bold text-green-600">6å¤©</div>
                </div>
            </div>

            <!-- Export Button -->
            <button onclick="exportToCSV()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg transition-all flex items-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                å¯¼å‡ºCSVè¡¨æ ¼
            </button>
        </div>
    </div>

    <!-- Summary Cards -->
    <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-8" id="summaryCards">
        <!-- Cards will be populated by JS -->
    </div>

    <!-- Detailed Table -->
    <div class="glass-panel rounded-2xl shadow-lg overflow-hidden">
        <div class="bg-gray-50 px-6 py-4 border-b border-gray-200 flex justify-between items-center">
            <h2 class="text-lg font-bold text-gray-800">è¯¦ç»†äº¤é€šæ–¹æ¡ˆå¯¹æ¯”</h2>
            <div class="flex gap-2">
                <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-semibold">é«˜é“</span>
                <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold">é£æœº</span>
                <span class="px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-semibold">ä¸­è½¬</span>
            </div>
        </div>
        
        <div class="overflow-x-auto">
            <table class="w-full text-sm" id="mainTable">
                <thead class="bg-gray-100 text-gray-700 font-semibold">
                    <tr>
                        <th class="px-4 py-3 text-left">ç›®çš„åœ°</th>
                        <th class="px-4 py-3 text-left">äº¤é€šæ–¹å¼</th>
                        <th class="px-4 py-3 text-left">å»ç¨‹è¯¦æƒ…</th>
                        <th class="px-4 py-3 text-left">è¿”ç¨‹è¯¦æƒ…</th>
                        <th class="px-4 py-3 text-right">2å¤§1å°æ€»ä»·</th>
                        <th class="px-4 py-3 text-center">è€—æ—¶</th>
                        <th class="px-4 py-3 text-center">èˆ’é€‚åº¦</th>
                    </tr>
                </thead>
                <tbody id="tableBody" class="divide-y divide-gray-200">
                    <!-- Populated by JS -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Notes -->
    <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-gray-600">
        <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-4">
            <h3 class="font-bold text-yellow-800 mb-2">âš ï¸ é‡è¦æç¤º</h3>
            <ul class="space-y-1 list-disc list-inside">
                <li>ç¥¨ä»·åŸºäº2025å¹´2æœˆ28æ—¥æŸ¥è¯¢æ•°æ®ï¼Œå®é™…ä»·æ ¼å¯èƒ½æµ®åŠ¨ Â±20%</li>
                <li>6æœˆ19æ—¥ä¸ºç«¯åˆèŠ‚å½“å¤©ï¼Œæœºç¥¨ä»·æ ¼å¯èƒ½ä¸Šæ¶¨</li>
                <li>å„¿ç«¥ç¥¨ï¼ˆ2-12å²ï¼‰ï¼šé£æœºä¸ºæˆäººå…¨ä»·50%ï¼Œé«˜é“ä¸ºå…¬å¸ƒç¥¨ä»·50%</li>
                <li>å©´å„¿ï¼ˆ<2å²ï¼‰ï¼šé£æœºä¸ºæˆäººå…¨ä»·10%ï¼Œé«˜é“å…ç¥¨</li>
            </ul>
        </div>
        <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
            <h3 class="font-bold text-blue-800 mb-2">ğŸ’¡ è´­ç¥¨å»ºè®®</h3>
            <ul class="space-y-1 list-disc list-inside">
                <li>é«˜é“ç¥¨æå‰15å¤©å¼€å”®ï¼ˆ6æœˆ3æ—¥å¯è´­6æœˆ19æ—¥è½¦ç¥¨ï¼‰</li>
                <li>æœºç¥¨å»ºè®®æå‰3-4å‘¨é¢„è®¢è·å–æ—©é¸Ÿä»·</li>
                <li>æ·±åœ³-æ•¦ç…Œæ— ç›´è¾¾ï¼Œå»ºè®®é€‰æ‹©é£æœºæˆ–å¢åŠ å‡æœŸå¤©æ•°</li>
                <li>è´µå·è‹—å¯¨éœ€é¢å¤–é¢„ç•™è´µé˜³-å‡¯é‡Œ-è‹—å¯¨çš„æ¥é©³æ—¶é—´</li>
            </ul>
        </div>
    </div>

</div>

<script>
// Data Structure
const transportData = {
    17: { // June 17
        guizhou: [
            { type: 'plane', name: 'æ·±åœ³â†’è´µé˜³ é£æœº', flight: 'CZ8545', airline: 'å—æ–¹èˆªç©º', dep: '08:00', arr: '10:05', price: 470, returnFlight: 'CZ8546', returnDep: '18:30', returnArr: '20:35', returnPrice: 520, note: 'æ—©ç­æœºï¼Œæ—¶é—´å……è£•' },
            { type: 'train', name: 'æ·±åœ³â†’è´µé˜³ é«˜é“', train: 'G2942', dep: '07:08', arr: '12:27', price: 397.5, returnTrain: 'G2945', returnDep: '15:20', returnArr: '20:38', returnPrice: 397.5, note: 'ç›´è¾¾ï¼Œæ— éœ€ä¸­è½¬' }
        ],
        yunnan: [
            { type: 'plane', name: 'æ·±åœ³â†’æ˜†æ˜â†’å¤§ç†', flight: 'MU5762', airline: 'ä¸œæ–¹èˆªç©º', dep: '07:30', arr: '09:50', price: 680, returnFlight: 'MU5761', returnDep: '19:20', returnArr: '21:40', returnPrice: 750, note: 'æ˜†æ˜ä¸­è½¬é«˜é“2hè‡³å¤§ç†' },
            { type: 'train', name: 'æ·±åœ³â†’å¤§ç† é«˜é“', train: 'G2976', dep: '08:08', arr: '18:43', price: 813, returnTrain: 'G2976', returnDep: '21:05', returnArr: '07:30+1', returnPrice: 813, note: 'ç›´è¾¾ä½†è¿”ç¨‹ä¸ºå¤œç­' }
        ],
        jiangnan: [
            { type: 'train', name: 'æ·±åœ³â†’è‹å· é«˜é“', train: 'G2790', dep: '06:35', arr: '15:46', price: 813, returnTrain: 'G2784', returnDep: '07:34', returnArr: '17:08', returnPrice: 813, note: 'æ—©å‘åˆè‡³ï¼Œæ—¶é—´åˆé€‚' },
            { type: 'train', name: 'æ·±åœ³â†’æ­å· é«˜é“', train: 'G700', dep: '07:21', arr: '13:26', price: 667, returnTrain: 'G1307', returnDep: '16:11', returnArr: '22:22', returnPrice: 667, note: 'æœ€å¿«è·¯çº¿' }
        ],
        lanzhou: [
            { type: 'plane', name: 'æ·±åœ³â†’å…°å· é£æœº', flight: 'CZ3655', airline: 'å—æ–¹èˆªç©º', dep: '06:15', arr: '09:40', price: 850, returnFlight: 'CZ3656', returnDep: '20:15', returnArr: '23:40', returnPrice: 920, note: 'å…°å·è‡³æ•¦ç…Œéœ€å†é£æˆ–ç«è½¦' },
            { type: 'train', name: 'æ·±åœ³â†’å…°å· é«˜é“', train: 'G814', dep: '08:52', arr: '19:18', price: 1142, returnTrain: 'G816', returnDep: '09:18', returnArr: '19:35', returnPrice: 1142, note: 'è€—æ—¶è¾ƒé•¿ï¼Œéœ€è¿‡å¤œ' }
        ],
        xian: [
            { type: 'plane', name: 'æ·±åœ³â†’è¥¿å®‰ é£æœº', flight: 'ZH9211', airline: 'æ·±åœ³èˆªç©º', dep: '06:15', arr: '08:55', price: 550, returnFlight: 'ZH9212', returnDep: '21:30', returnArr: '00:15+1', returnPrice: 600, note: 'æ—©å»æ™šå›ï¼Œæ—¶é—´æœ€ä¼˜' },
            { type: 'train', name: 'æ·±åœ³â†’è¥¿å®‰ é«˜é“', train: 'G830', dep: '12:43', arr: '22:38', price: 1017, returnTrain: 'G838', returnDep: '11:02', returnArr: '21:14', returnPrice: 1017, note: 'ç›´è¾¾ï¼Œä½†åˆ°è¾¾è¾ƒæ™š' }
        ]
    },
    18: { // June 18
        guizhou: [
            { type: 'plane', name: 'æ·±åœ³â†’è´µé˜³ é£æœº', flight: 'CZ8545', airline: 'å—æ–¹èˆªç©º', dep: '08:00', arr: '10:05', price: 450, returnFlight: 'CZ8546', returnDep: '18:30', returnArr: '20:35', returnPrice: 500, note: 'æ—©ç­æœº' },
            { type: 'train', name: 'æ·±åœ³â†’è´µé˜³ é«˜é“', train: 'G2942', dep: '07:08', arr: '12:27', price: 397.5, returnTrain: 'G2945', returnDep: '15:20', returnArr: '20:38', returnPrice: 397.5, note: 'ç›´è¾¾' }
        ],
        yunnan: [
            { type: 'plane', name: 'æ·±åœ³â†’æ˜†æ˜â†’å¤§ç†', flight: 'MU5762', airline: 'ä¸œæ–¹èˆªç©º', dep: '07:30', arr: '09:50', price: 650, returnFlight: 'MU5761', returnDep: '19:20', returnArr: '21:40', returnPrice: 720, note: 'æ˜†æ˜ä¸­è½¬' },
            { type: 'train', name: 'æ·±åœ³â†’å¤§ç† é«˜é“', train: 'G2976', dep: '08:08', arr: '18:43', price: 813, returnTrain: 'G2976', returnDep: '21:05', returnArr: '07:30+1', returnPrice: 813, note: 'ç›´è¾¾' }
        ],
        jiangnan: [
            { type: 'train', name: 'æ·±åœ³â†’è‹å· é«˜é“', train: 'G2790', dep: '06:35', arr: '15:46', price: 813, returnTrain: 'G2784', returnDep: '07:34', returnArr: '17:08', returnPrice: 813, note: 'æ—©å‘åˆè‡³' },
            { type: 'train', name: 'æ·±åœ³â†’æ­å· é«˜é“', train: 'G700', dep: '07:21', arr: '13:26', price: 667, returnTrain: 'G1307', returnDep: '16:11', returnArr: '22:22', returnPrice: 667, note: 'æ¨è' }
        ],
        lanzhou: [
            { type: 'plane', name: 'æ·±åœ³â†’å…°å· é£æœº', flight: 'CZ3655', airline: 'å—æ–¹èˆªç©º', dep: '06:15', arr: '09:40', price: 820, returnFlight: 'CZ3656', returnDep: '20:15', returnArr: '23:40', returnPrice: 880, note: 'éœ€ä¸­è½¬æ•¦ç…Œ' },
            { type: 'train', name: 'æ·±åœ³â†’å…°å· é«˜é“', train: 'G814', dep: '08:52', arr: '19:18', price: 1142, returnTrain: 'G816', returnDep: '09:18', returnArr: '19:35', returnPrice: 1142, note: 'è€—æ—¶è¾ƒé•¿' }
        ],
        xian: [
            { type: 'plane', name: 'æ·±åœ³â†’è¥¿å®‰ é£æœº', flight: 'ZH9211', airline: 'æ·±åœ³èˆªç©º', dep: '06:15', arr: '08:55', price: 530, returnFlight: 'ZH9212', returnDep: '21:30', returnArr: '00:15+1', returnPrice: 580, note: 'æ—©å»æ™šå›' },
            { type: 'train', name: 'æ·±åœ³â†’è¥¿å®‰ é«˜é“', train: 'G830', dep: '12:43', arr: '22:38', price: 1017, returnTrain: 'G838', returnDep: '11:02', returnArr: '21:14', returnPrice: 1017, note: 'ç›´è¾¾' }
        ]
    },
    19: { // June 19 (Dragon Boat Festival)
        guizhou: [
            { type: 'plane', name: 'æ·±åœ³â†’è´µé˜³ é£æœº', flight: 'CZ8545', airline: 'å—æ–¹èˆªç©º', dep: '08:00', arr: '10:05', price: 520, returnFlight: 'CZ8546', returnDep: '18:30', returnArr: '20:35', returnPrice: 580, note: 'ç«¯åˆå½“å¤©ï¼Œä»·æ ¼ä¸Šæ¶¨' },
            { type: 'train', name: 'æ·±åœ³â†’è´µé˜³ é«˜é“', train: 'G2942', dep: '07:08', arr: '12:27', price: 397.5, returnTrain: 'G2945', returnDep: '15:20', returnArr: '20:38', returnPrice: 397.5, note: 'ä»·æ ¼ç¨³å®šï¼Œæ¨è' }
        ],
        yunnan: [
            { type: 'plane', name: 'æ·±åœ³â†’æ˜†æ˜â†’å¤§ç†', flight: 'MU5762', airline: 'ä¸œæ–¹èˆªç©º', dep: '07:30', arr: '09:50', price: 780, returnFlight: 'MU5761', returnDep: '19:20', returnArr: '21:40', returnPrice: 850, note: 'ç«¯åˆé«˜å³°æœŸ' },
            { type: 'train', name: 'æ·±åœ³â†’å¤§ç† é«˜é“', train: 'G2976', dep: '08:08', arr: '18:43', price: 813, returnTrain: 'G2976', returnDep: '21:05', returnArr: '07:30+1', returnPrice: 813, note: 'ç›´è¾¾' }
        ],
        jiangnan: [
            { type: 'train', name: 'æ·±åœ³â†’è‹å· é«˜é“', train: 'G2790', dep: '06:35', arr: '15:46', price: 813, returnTrain: 'G2784', returnDep: '07:34', returnArr: '17:08', returnPrice: 813, note: 'æ—©å‘åˆè‡³' },
            { type: 'train', name: 'æ·±åœ³â†’æ­å· é«˜é“', train: 'G700', dep: '07:21', arr: '13:26', price: 667, returnTrain: 'G1307', returnDep: '16:11', returnArr: '22:22', returnPrice: 667, note: 'æ€§ä»·æ¯”æœ€é«˜' }
        ],
        lanzhou: [
            { type: 'plane', name: 'æ·±åœ³â†’å…°å· é£æœº', flight: 'CZ3655', airline: 'å—æ–¹èˆªç©º', dep: '06:15', arr: '09:40', price: 950, returnFlight: 'CZ3656', returnDep: '20:15', returnArr: '23:40', returnPrice: 1050, note: 'èŠ‚æ—¥æº¢ä»·' },
            { type: 'train', name: 'æ·±åœ³â†’å…°å· é«˜é“', train: 'G814', dep: '08:52', arr: '19:18', price: 1142, returnTrain: 'G816', returnDep: '09:18', returnArr: '19:35', returnPrice: 1142, note: 'è€—æ—¶è¿‡é•¿' }
        ],
        xian: [
            { type: 'plane', name: 'æ·±åœ³â†’è¥¿å®‰ é£æœº', flight: 'ZH9211', airline: 'æ·±åœ³èˆªç©º', dep: '06:15', arr: '08:55', price: 650, returnFlight: 'ZH9212', returnDep: '21:30', returnArr: '00:15+1', returnPrice: 720, note: 'èŠ‚æ—¥ä»·æ ¼ä¸Šæ¶¨' },
            { type: 'train', name: 'æ·±åœ³â†’è¥¿å®‰ é«˜é“', train: 'G830', dep: '12:43', arr: '22:38', price: 1017, returnTrain: 'G838', returnDep: '11:02', returnArr: '21:14', returnPrice: 1017, note: 'ç›´è¾¾' }
        ]
    }
};

const destinationNames = {
    guizhou: 'è´µå·è‹—å¯¨',
    yunnan: 'äº‘å—å¤§ç†',
    jiangnan: 'æ±Ÿå—è‹æ­',
    lanzhou: 'å…°å·æ•¦ç…Œ',
    xian: 'è¥¿å®‰é•¿å®‰'
};

const destinationIcons = {
    guizhou: 'ğŸŒ¾',
    yunnan: 'ğŸŒ¸',
    jiangnan: 'ğŸŒŠ',
    lanzhou: 'ğŸœï¸',
    xian: 'ğŸ›ï¸'
};

let currentDate = 19;

// Initialize
document.getElementById('dateSlider').addEventListener('input', function(e) {
    currentDate = parseInt(e.target.value);
    updateDisplay();
});

function calculateTotal(price, returnPrice) {
    // 2 adults + 1 child (50% of adult for both plane and train)
    const adultTotal = (price + returnPrice) * 2;
    const childTotal = (price + returnPrice) * 0.5;
    return Math.round(adultTotal + childTotal);
}

function updateDisplay() {
    const dateStr = `6æœˆ${currentDate}æ—¥`;
    const returnDay = currentDate + 5;
    const returnDateStr = `6æœˆ${returnDay}æ—¥`;
    
    document.getElementById('departDate').textContent = dateStr;
    document.getElementById('returnDate').textContent = returnDateStr;
    
    updateSummaryCards();
    updateTable();
}

function updateSummaryCards() {
    const container = document.getElementById('summaryCards');
    container.innerHTML = '';
    
    Object.keys(transportData[currentDate]).forEach(dest => {
        const options = transportData[currentDate][dest];
        const cheapest = options.reduce((min, opt) => {
            const total = calculateTotal(opt.price, opt.returnPrice);
            return total < min.total ? { ...opt, total, dest } : min;
        }, { total: Infinity });
        
        const card = document.createElement('div');
        card.className = 'bg-white rounded-xl p-4 shadow-md border border-gray-100 route-card cursor-pointer';
        card.innerHTML = `
            <div class="text-2xl mb-2">${destinationIcons[dest]}</div>
            <div class="font-bold text-gray-800 mb-1">${destinationNames[dest]}</div>
            <div class="text-xs text-gray-500 mb-2">æœ€ä½æ€»ä»·</div>
            <div class="text-xl font-bold text-indigo-600">Â¥${cheapest.total.toLocaleString()}</div>
            <div class="text-xs text-gray-400 mt-1">${cheapest.type === 'plane' ? 'âœˆï¸ é£æœº' : 'ğŸš„ é«˜é“'}</div>
        `;
        card.onclick = () => {
            document.getElementById('mainTable').scrollIntoView({ behavior: 'smooth' });
            // Highlight row
            document.querySelectorAll('.highlight-row').forEach(r => r.classList.remove('highlight-row'));
            document.getElementById(`row-${dest}`)?.classList.add('highlight-row');
        };
        container.appendChild(card);
    });
}

function updateTable() {
    const tbody = document.getElementById('tableBody');
    tbody.innerHTML = '';
    
    Object.keys(transportData[currentDate]).forEach(dest => {
        const options = transportData[currentDate][dest];
        
        options.forEach((opt, idx) => {
            const total = calculateTotal(opt.price, opt.returnPrice);
            const row = document.createElement('tr');
            row.id = `row-${dest}`;
            row.className = 'hover:bg-gray-50 transition-colors border-b border-gray-100';
            
            const isPlane = opt.type === 'plane';
            const typeBadge = isPlane ? 
                '<span class="px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-semibold">é£æœº</span>' : 
                '<span class="px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-semibold">é«˜é“</span>';
            
            const comfortStars = isPlane ? 'â­â­â­â­â­' : (opt.price > 800 ? 'â­â­â­â­' : 'â­â­â­');
            
            row.innerHTML = `
                <td class="px-4 py-4">
                    ${idx === 0 ? `<div class="font-bold text-gray-800 text-lg">${destinationIcons[dest]} ${destinationNames[dest]}</div>` : ''}
                </td>
                <td class="px-4 py-4">
                    <div class="flex items-center gap-2 mb-1">${typeBadge}</div>
                    <div class="text-xs text-gray-500">${opt.name}</div>
                </td>
                <td class="px-4 py-4">
                    <div class="font-mono font-semibold text-gray-800">${opt.dep} â†’ ${opt.arr}</div>
                    <div class="text-xs text-gray-500 mt-1">
                        ${isPlane ? `<span class="text-blue-600 font-semibold">${opt.airline}</span> ${opt.flight}` : `<span class="text-blue-600 font-semibold">${opt.train}</span>`}
                    </div>
                    <div class="text-xs text-gray-400 mt-1">Â¥${opt.price}/äºº</div>
                </td>
                <td class="px-4 py-4">
                    <div class="font-mono font-semibold text-gray-800">${opt.returnDep} â†’ ${opt.returnArr}</div>
                    <div class="text-xs text-gray-500 mt-1">
                        ${isPlane ? `${opt.airline} ${opt.returnFlight}` : opt.returnTrain}
                    </div>
                    <div class="text-xs text-gray-400 mt-1">Â¥${opt.returnPrice}/äºº</div>
                </td>
                <td class="px-4 py-4 text-right">
                    <div class="text-2xl font-bold text-indigo-600">Â¥${total.toLocaleString()}</div>
                    <div class="text-xs text-gray-400">å«ç¨åŠå„¿ç«¥ç¥¨</div>
                </td>
                <td class="px-4 py-4 text-center">
                    <div class="font-semibold text-gray-700">${isPlane ? '2.5-3h' : '7-11h'}</div>
                    <div class="text-xs text-gray-400">å•ç¨‹</div>
                </td>
                <td class="px-4 py-4 text-center text-lg">${comfortStars}</td>
            `;
            
            tbody.appendChild(row);
        });
    });
}

function exportToCSV() {
    let csv = 'ç›®çš„åœ°,äº¤é€šç±»å‹,å»ç¨‹èˆªç­/è½¦æ¬¡,å»ç¨‹æ—¶é—´,å»ç¨‹ä»·æ ¼,è¿”ç¨‹èˆªç­/è½¦æ¬¡,è¿”ç¨‹æ—¶é—´,è¿”ç¨‹ä»·æ ¼,2å¤§1å°æ€»ä»·,è€—æ—¶,å¤‡æ³¨\n';
    
    Object.keys(transportData[currentDate]).forEach(dest => {
        transportData[currentDate][dest].forEach(opt => {
            const total = calculateTotal(opt.price, opt.returnPrice);
            const isPlane = opt.type === 'plane';
            csv += `${destinationNames[dest]},${isPlane ? 'é£æœº' : 'é«˜é“'},${isPlane ? opt.flight : opt.train},${opt.dep}-${opt.arr},${opt.price},${isPlane ? opt.returnFlight : opt.returnTrain},${opt.returnDep}-${opt.returnArr},${opt.returnPrice},${total},${isPlane ? '2.5-3h' : '7-11h'},${opt.note}\n`;
        });
    });
    
    const blob = new Blob(['\ufeff' + csv], { type: 'text/csv;charset=utf-8;' });
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = `2026ç«¯åˆäº¤é€šæ–¹æ¡ˆ_6æœˆ${currentDate}æ—¥å‡ºå‘.csv`;
    link.click();
}

// Initial render
updateDisplay();
</script>

</body>
</html>
